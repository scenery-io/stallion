// VERSION 0.6.0
// This is the compiled version
// Read the source at https://github.com/scenery-io/stallion.git
(()=>{var n=class{#e;constructor(a){this.#e=a}onPost=()=>{let a=this.#e.getNextPost(),u;try{u=JSON.parse(a.result)}catch{return console.error("Failed to parse request as JSON")}console.log("Stallion: Data received");let{type:e,code:r,path:t}=u;if(!e&&!t)return console.error("Stallion: Missing/empty `type` key in request");if(!r&&!t)return console.error("Stallion: Missing/empty `code` or `path` key in request");if(e==="script"||t){if(r&&t&&console.warn("Stallion: `code` and `path` keys are both in the request, executing `path`"),t){if(!api.filePathExists(t))return console.error(`Stallion: No script found at ${t}`);if(ui.runFileScript(t))return console.log("Stallion: Script successfully executed")}return r&&!t&&api.exec("io.scenery.stallion",`(function() { ${r} 
})()`)?console.log("Stallion: Script successfully executed"):console.error("Stallion: Script failed to execute")}if(e.startsWith("javaScript")||e.startsWith("sksl")){let s=api.getSelection();s.length||(s=[api.create(e)]);let o="expression";e==="javaScriptShape"&&(o="generator.expression"),e.startsWith("sksl")&&(o="code");for(let i of s){if(api.getLayerType(i)!==e){let g=api.getNiceName(i);console.warn(`Stallion: Skipped layer '${g}' because it is not of type '${e}'`);continue}api.set(i,{[o]:r})}return console.log("Stallion: Successfully applied expression")}if(e.toLowerCase().includes("render")){let s=api.getRenderQueueItems();for(let o of s)api.get(o,"selected")&&api.set(o,{[e]:r});return console.log("Stallion: Successfully applied render expression")}console.error(`Stallion: Unexpected type '${e}'`)}};var p="2.4.0",x=cavalry.versionLessThan(p);if(x)throw new Error(`Stallion requires Cavalry ${p} or higher`);var l=new api.WebServer,d=8080,S="127.0.0.1",m=new n(l);l.listen(S,d);l.addCallbackObject(m);l.setHighFrequency();var y={CENTRE:1},f=new ui.Label(`Listening on ${S}:${d}`);f.setAlignment(y.CENTRE);var h=new ui.Label("[Documentation](https://github.com/scenery-io/stallion#readme)");h.setAlignment(y.CENTRE);var c=new ui.VLayout;c.addStretch();c.add(f,h);c.addStretch();ui.setTitle("Stallion");ui.add(c);ui.show();})();
